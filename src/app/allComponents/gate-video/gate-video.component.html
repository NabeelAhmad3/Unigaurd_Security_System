<div class="process-video">
  <h1>Process Gate Access Video</h1>

  <div *ngIf="message" [ngClass]="message.includes('successfully') ? 'success-message' : 'error-message'">
    {{ message }}
  </div>

  <div class="video-uploads">
    <div class="upload-section">
      <h3>Upload Gate Video</h3>
      <input type="file" accept="video/*" (change)="onGateVideoSelected($event)">
      <video *ngIf="gateVideoUrl" [src]="gateVideoUrl" controls></video>
    </div>

    <div class="upload-section">
      <h3>Upload Face Video</h3>
      <input type="file" accept="video/*" (change)="onFaceVideoSelected($event)">
      <video *ngIf="faceVideoUrl" [src]="faceVideoUrl" controls></video>
    </div>
  </div>

  <div *ngIf="processing" class="loader-container">
    <div class="loader"></div>
    <p>Analyzing video, please wait...</p>
  </div>

  <button (click)="processGateVideo()" [disabled]="!gateVideoFile || processing" class="process-btn">
    {{ processing ? 'Processing...' : 'Process Video for Access' }}
  </button>
  <div *ngIf="processResult" class="process-results">

    <div *ngIf="processResult.access_granted" class="success-text">
      <h2>✅ ACCESS GRANTED</h2>
    </div>
    <div *ngIf="!processResult.access_granted" class="error-text">
      <h2>❌ ACCESS DENIED</h2>
    </div>

    <div *ngIf="faceVideoFile" class="results-section">
      <h3>Face Recognition Results</h3>
      <div *ngIf="processResult.face_match" class="success-text">
        ✅ Face Matched
      </div>
      <div *ngIf="!processResult.face_match" class="warning-text">
        ❌ No Matching Face
      </div>
    </div>

    <div *ngIf="gateVideoFile" class="results-section">
      <h3>Car Plate Results</h3>
      <div *ngIf="processResult.details" class="details-container">
        ✅ Car Plate Matched
        <h3>User Information</h3>
        <p><strong>Name:</strong> {{ processResult.details.user_info?.name || 'N/A' }}</p>
        <p><strong>Email:</strong> {{ processResult.details.user_info?.email || 'N/A' }}</p>
        <h3>Vehicle Information</h3>
        <p><strong>Plate Number:</strong> {{ processResult.details.vehicle_info?.plate_number || 'N/A' }}</p>
        <p><strong>Model:</strong> {{ processResult.details.vehicle_info?.model || 'N/A' }}</p>
        <p><strong>Color:</strong> {{ processResult.details.vehicle_info?.color || 'N/A' }}</p>


      </div>
    </div>
  </div>
</div>